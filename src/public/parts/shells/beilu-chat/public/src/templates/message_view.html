<div class="chat-message mb-3 group" id="${id}" data-template-type="message">
	<!-- 消息头部：头像 + 名字 + 时间 -->
	<div class="message-header flex items-center gap-2 px-1 mb-1">
		<div class="message-avatar w-8 h-8 rounded-full overflow-hidden flex-shrink-0 bg-amber-900/30">
			<img src="${avatar}" alt="${name}" class="w-full h-full object-cover"
				onerror="this.style.display='none'" />
		</div>
		<span class="char-name text-sm font-bold text-primary">${name}</span>
		<span class="message-timestamp text-xs opacity-40">${time_stamp}</span>
	</div>
	<!-- 消息体 -->
	<div class="chat-bubble relative p-[15px] ml-10 rounded-lg ${contentHasMedia ? 'w-full' : ''}">
		<div class="button-group">
			<div class="normal-buttons join" style="display: flex;">
				<button class="edit-button btn btn-xs btn-primary join-item" data-i18n="chat.messageView.buttons.edit">
					<img src="https://api.iconify.design/line-md/edit.svg" data-i18n="chat.messageView.buttons.editIcon" />
				</button>
				<button class="btn btn-xs btn-ghost join-item" popovertarget="popover-${id}" style="anchor-name:--anchor-${id}" data-i18n="chat.messageView.buttons.more">
					<img src="https://api.iconify.design/line-md/list-3.svg" data-i18n="chat.messageView.buttons.moreIcon" />
				</button>
			</div>
			<div class="shift-buttons join" style="display: none;">
				<button class="download-html-button-direct btn btn-xs btn-success join-item" data-i18n="chat.messageView.buttons.downloadHtml">
					<img src="https://api.iconify.design/line-md/download.svg" data-i18n="chat.messageView.buttons.downloadHtmlIcon" />
				</button>
				<button class="delete-button btn btn-xs btn-error join-item" data-i18n="chat.messageView.buttons.delete">
					<img src="https://api.iconify.design/line-md/remove.svg" data-i18n="chat.messageView.buttons.deleteIcon" />
				</button>
			</div>
		</div>
		<ul class="dropdown dropdown-end menu w-52 rounded-box bg-base-100 shadow-sm" popover id="popover-${id}" style="position-anchor:--anchor-${id}">
			<li>
				<a class="delete-button">
					<img src="https://api.iconify.design/line-md/remove.svg" class="w-4 h-4" data-i18n="chat.messageView.dropdown.deleteIcon" />
					<span data-i18n="chat.messageView.dropdown.delete"></span>
				</a>
			</li>
			<li>
				<a class="copy-markdown-button">
					<img src="https://api.iconify.design/line-md/document-list.svg" class="w-4 h-4" data-i18n="chat.messageView.dropdown.copyMarkdownIcon" />
					<span data-i18n="chat.messageView.dropdown.copyMarkdown"></span>
				</a>
			</li>
			<li>
				<a class="copy-text-button">
					<img src="https://api.iconify.design/line-md/document.svg" class="w-4 h-4" data-i18n="chat.messageView.dropdown.copyTextIcon" />
					<span data-i18n="chat.messageView.dropdown.copyText"></span>
				</a>
			</li>
			<li>
				<a class="copy-html-button">
					<img src="https://api.iconify.design/line-md/document-code.svg" class="w-4 h-4" data-i18n="chat.messageView.dropdown.copyHtmlIcon" />
					<span data-i18n="chat.messageView.dropdown.copyHtml"></span>
				</a>
			</li>
			<li>
				<a class="download-html-button">
					<img src="https://api.iconify.design/line-md/download.svg" class="w-4 h-4" data-i18n="chat.messageView.dropdown.downloadHtmlIcon" />
					<span data-i18n="chat.messageView.dropdown.downloadHtml"></span>
				</a>
			</li>
			<li>
				<details>
					<summary>
						<img src="https://api.iconify.design/line-md/external-link.svg" class="w-4 h-4" data-i18n="chat.messageView.dropdown.shareIcon" />
						<span data-i18n="chat.messageView.dropdown.share"></span>
					</summary>
					<ul>
						<li><span class="share-button" data-time="1h" data-i18n="chat.messageView.dropdown.share.1h"></span></li>
						<li><span class="share-button" data-time="12h" data-i18n="chat.messageView.dropdown.share.12h"></span></li>
						<li><span class="share-button" data-time="24h" data-i18n="chat.messageView.dropdown.share.24h"></span></li>
						<li><span class="share-button" data-time="72h" data-i18n="chat.messageView.dropdown.share.72h"></span></li>
					</ul>
				</details>
			</li>
		</ul>
		<div class="message-content markdown-body">
		</div>
		<div class="attachments"></div>
	</div>
</div>

<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<meta name="darkreader-lock" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta property="og:title" content="beilu-与你之诗" />
	<meta property="og:type" content="website" />
	<meta property="og:description" content="选择你的身份，开始与贝露的旅程。" />
	<meta name="description" content="选择你的身份，开始与贝露的旅程。" />
	<title>登录 — beilu-与你之诗</title>
	<link rel="icon" href="/favicon.ico" />
	<link rel="icon" href="/favicon.png" type="image/png" />
	<link rel="manifest" href="/manifest.json" />
	<script blocking="render" type="module" src="/preload.mjs"></script>
	<link href="https://cdn.jsdelivr.net/npm/daisyui/daisyui.css" rel="stylesheet" type="text/css" crossorigin="anonymous" />
	<link href="/base.css" rel="stylesheet" type="text/css" crossorigin="anonymous" />
	<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4" crossorigin="anonymous"></script>
	<script type="module" src="/base.mjs"></script>
	<link rel="stylesheet" href="./index.css" type="text/css" />
</head>

<body class="flex flex-col min-h-screen">
	<main class="flex-grow hero">
		<div class="hero-content flex-col w-full max-w-lg">

			<!-- 视图1: 用户选择 -->
			<div id="view-user-select" class="w-full" style="display: none;">
				<h1 class="text-3xl font-bold text-center mb-6">选择用户</h1>
				<div id="user-list" class="flex flex-col gap-3 mb-4">
					<!-- 用户卡片将动态插入 -->
				</div>
				<div class="divider">或</div>
				<button class="btn btn-primary w-full" id="btn-create-new">创建新用户</button>
			</div>

			<!-- 视图2: 创建用户 -->
			<div id="view-create-user" class="w-full" style="display: none;">
				<h1 class="text-3xl font-bold text-center mb-6">创建新用户</h1>
				<div class="card shrink-0 w-full shadow-2xl bg-base-100">
					<div class="card-body">
						<p class="text-error text-xs" id="create-error-message"></p>
						<div class="form-control">
							<label class="label" for="create-username">
								<span class="label-text">用户名</span>
							</label>
							<input type="text" id="create-username" class="input input-bordered" placeholder="输入你的名字" required autocomplete="username" />
						</div>
						<div class="form-control mt-4">
							<label class="label">
								<span class="label-text">认证方式</span>
							</label>
							<div class="flex gap-3">
								<label class="label cursor-pointer gap-2">
									<input type="radio" name="auth-mode" value="passwordless" class="radio radio-primary" checked />
									<span class="label-text">无需密码</span>
								</label>
								<label class="label cursor-pointer gap-2">
									<input type="radio" name="auth-mode" value="password" class="radio radio-primary" />
									<span class="label-text">使用密码</span>
								</label>
							</div>
						</div>
						<div id="create-password-group" class="form-control" style="display: none;">
							<label class="label" for="create-password">
								<span class="label-text">密码</span>
							</label>
							<input type="password" id="create-password" class="input input-bordered" placeholder="设置密码" autocomplete="new-password" />
							<div id="create-password-strength" class="text-xs mt-1"></div>
						</div>
						<div id="create-confirm-password-group" class="form-control" style="display: none;">
							<label class="label" for="create-confirm-password">
								<span class="label-text">确认密码</span>
							</label>
							<input type="password" id="create-confirm-password" class="input input-bordered" placeholder="再次输入密码" autocomplete="new-password" />
						</div>
						<div class="card-actions justify-between mt-4">
							<button class="btn btn-ghost" id="btn-back-to-select">返回</button>
							<button class="btn btn-primary" id="btn-create-submit">创建并登录</button>
						</div>
					</div>
				</div>
			</div>

			<!-- 视图3: 密码登录 -->
			<div id="view-password-login" class="w-full" style="display: none;">
				<h1 class="text-3xl font-bold text-center mb-2">欢迎回来</h1>
				<p class="text-center text-base-content/60 mb-6" id="password-login-username-display"></p>
				<div class="card shrink-0 w-full shadow-2xl bg-base-100">
					<div class="card-body">
						<p class="text-error text-xs" id="login-error-message"></p>
						<div class="form-control">
							<label class="label" for="login-password">
								<span class="label-text">密码</span>
							</label>
							<input type="password" id="login-password" class="input input-bordered" placeholder="输入密码" required autocomplete="current-password" />
						</div>
						<div class="card-actions justify-between mt-4">
							<button class="btn btn-ghost" id="btn-back-from-login">返回</button>
							<button class="btn btn-primary" id="btn-login-submit">登录</button>
						</div>
					</div>
				</div>
			</div>

			<!-- 加载中 -->
			<div id="view-loading" class="flex flex-col items-center gap-4">
				<span class="loading loading-ring loading-lg"></span>
				<p class="text-base-content/60">加载中...</p>
			</div>

		</div>
	</main>

	<script type="module" src="./index.mjs"></script>
</body>

</html>
